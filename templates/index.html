<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¶ˆè€—å“åœ¨åº«ä¸€è¦§</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background-color: #f5f5f5;
    color: #333;
}

/* ãƒ˜ãƒƒãƒ€ãƒ¼ */
.header {
    background: linear-gradient(135deg, #009688 0%, #00796B 100%);
    color: white;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.header h1 {
    font-size: 28px;
    margin-bottom: 8px;
}

.subtitle {
    font-size: 14px;
    opacity: 0.9;
}

.header-user-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.header-user-info span {
    font-weight: 600;
    font-size: 14px;
}

.btn-sm {
    padding: 8px 16px;
    font-size: 13px;
}

/* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
.nav-menu {
    display: flex;
    overflow-x: auto;
    background: white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 0;
}

.nav-btn {
    flex: 1;
    min-width: 120px;
    padding: 16px 12px;
    font-size: 14px;
    font-weight: 600;
    background: none;
    border: none;
    border-bottom: 3px solid transparent;
    cursor: pointer;
    transition: all 0.3s;
    color: #666;
}

.nav-btn:hover {
    background: #f5f5f5;
    color: #009688;
}

.nav-btn.active {
    color: #009688;
    border-bottom-color: #009688;
    background: #f0f8f7;
}

/* ã‚µãƒ–ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒŠ */
.subtab-container {
    background: #f9f9f9;
    border-bottom: 1px solid #e0e0e0;
    padding: 8px 20px;
}

.subtab-group {
    display: flex;
    gap: 8px;
}

.subtab-btn {
    padding: 10px 20px;
    font-size: 13px;
    font-weight: 500;
    background: white;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.3s;
    color: #666;
    white-space: nowrap;
}

.subtab-btn:hover {
    background: #e8f5e9;
    border-color: #009688;
    color: #009688;
}

.subtab-btn.active {
    background: #009688;
    color: white;
    border-color: #009688;
    font-weight: 600;
}

/* ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
.page-content {
    display: none;
}

.page-content.active {
    display: block;
}

.page-header {
    background: white;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.page-header h2 {
    font-size: 22px;
    margin-bottom: 8px;
    color: #333;
}

.page-header p {
    font-size: 14px;
    color: #666;
}

.subtab-group {
    display: flex;
    gap: 12px;
    margin: 20px;
    padding: 6px;
    background: white;
    border-radius: 999px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

.subtab-btn {
    flex: 1;
    border: none;
    background: transparent;
    padding: 12px 16px;
    border-radius: 999px;
    font-size: 15px;
    font-weight: 600;
    color: #607d8b;
    cursor: pointer;
    transition: all 0.2s ease;
}

.subtab-btn.active {
    color: #fff;
    background: linear-gradient(135deg, #00a58c, #00897b);
    box-shadow: 0 6px 16px rgba(0,0,0,0.15);
}

.detail-tab-content {
    margin: 0 20px 30px;
}

.detail-tab-content[hidden] {
    display: none !important;
}

.section-title {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 18px;
    color: #37474f;
}

.image-upload-group small {
    display: block;
    margin-top: 6px;
    color: #607d8b;
    font-size: 12px;
}

.image-preview {
    margin-top: 10px;
    border: 1px dashed #b0bec5;
    border-radius: 10px;
    padding: 8px;
    background: #fafafa;
    display: flex;
    justify-content: center;
    align-items: center;
}

.image-preview[hidden] {
    display: none !important;
}

.image-preview img {
    max-width: 100%;
    height: 140px;
    object-fit: cover;
    border-radius: 8px;
}

.image-upload-actions {
    margin-top: 8px;
}

.image-upload-actions .btn {
    width: 100%;
}

.primary-action {
    width: 100%;
    padding: 15px;
    font-size: 16px;
    margin-top: 8px;
}

.input-with-button {
    display: flex;
    gap: 10px;
    align-items: center;
}

.input-with-button .input-field {
    flex: 1;
}

/* ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒ†ãƒŠ */
.form-container {
    background: white;
    padding: 20px;
    margin: 20px;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.import-section {
    margin-top: 32px;
    padding: 20px;
    border: 1px dashed #b2dfdb;
    border-radius: 12px;
    background: #f9fffe;
}

.import-section h3 {
    margin-bottom: 12px;
    font-size: 18px;
    color: #00796B;
}

.import-note {
    font-size: 14px;
    color: #607D8B;
    margin-bottom: 12px;
}

.file-input {
    border: 2px dashed #cfd8dc;
    background: white;
    padding: 12px;
    cursor: pointer;
}

.import-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    align-items: center;
    margin-top: 12px;
}

.template-link {
    color: #009688;
    font-weight: 600;
    text-decoration: none;
}

.template-link:hover {
    text-decoration: underline;
}

.import-hint {
    display: block;
    margin-top: 8px;
    font-size: 12px;
    color: #607D8B;
}

.item-info {
    margin-top: 20px;
    padding: 16px;
    background: #f9f9f9;
    border-radius: 8px;
}

.item-info h3 {
    font-size: 18px;
    margin-bottom: 12px;
    color: #333;
}

/* ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒŠ */
.list-container {
    padding: 20px;
}

.list-container h3 {
    font-size: 18px;
    margin-bottom: 16px;
    color: #333;
}

.order-card {
    background: white;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    border-left: 4px solid #009688;
}

/* ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚¨ãƒªã‚¢ */
.filter-container {
    background: white;
    padding: 20px;
    margin: 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.filter-container h2 {
    font-size: 20px;
    margin-bottom: 16px;
    color: #333;
}

.filter-group {
    margin-bottom: 16px;
}

.filter-group label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 6px;
    color: #555;
}

.input-field {
    width: 100%;
    padding: 12px;
    font-size: 16px;
    border: 1px solid #ddd;
    border-radius: 8px;
    transition: border-color 0.3s, box-shadow 0.3s;
}

.input-field:focus {
    outline: none;
    border-color: #009688;
    box-shadow: 0 0 0 3px rgba(0, 150, 136, 0.1);
}

/* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚°ãƒ«ãƒ¼ãƒ— */
.checkbox-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px;
    background-color: #f9f9f9;
    border: 1px solid #ddd;
    border-radius: 8px;
}

.checkbox-group label {
    display: flex;
    align-items: center;
    font-size: 14px;
    font-weight: 500;
    color: #333;
    cursor: pointer;
    padding: 6px;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.checkbox-group label:hover {
    background-color: #e8f5e9;
}

.checkbox-group input[type="checkbox"] {
    width: 18px;
    height: 18px;
    margin-right: 8px;
    cursor: pointer;
}

.button-group {
    display: flex;
    gap: 12px;
    margin-bottom: 16px;
}

.btn {
    flex: 1;
    padding: 12px 20px;
    font-size: 16px;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s;
}

.btn-primary {
    background-color: #009688;
    color: white;
}

.btn-primary:hover {
    background-color: #00796B;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 150, 136, 0.3);
}

.btn-secondary {
    background-color: #f0f0f0;
    color: #555;
}

.btn-secondary:hover {
    background-color: #e0e0e0;
}

.btn-outline {
    border: 1px dashed #009688;
    background: transparent;
    color: #009688;
}

.btn-outline:hover {
    background: rgba(0, 150, 136, 0.08);
    color: #00695C;
}

.btn-sm {
    padding: 6px 12px;
    font-size: 13px;
    margin: 0 4px;
}

.btn-danger {
    background-color: #f44336;
    color: white;
}

.btn-danger:hover {
    background-color: #d32f2f;
}

.filter-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

/* è¡¨ç¤ºä»¶æ•° */
.count-info {
    padding: 16px 20px;
    background: white;
    border-bottom: 1px solid #e0e0e0;
}

.count-info p {
    font-size: 16px;
    font-weight: 600;
    color: #333;
}

/* åœ¨åº«ä¸€è¦§ */
.inventory-list {
    padding: 20px;
}

.loading {
    text-align: center;
    padding: 40px;
    color: #999;
    font-size: 16px;
}

.inventory-card {
    background: white;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    transition: transform 0.2s, box-shadow 0.2s;
}

.inventory-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.12);
}

.inventory-list.compact {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 16px;
}

.inventory-list.compact .inventory-card {
    margin: 0;
}

.inventory-card.compact .card-main {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
}

.inventory-card.compact .card-actions {
    flex-direction: row;
    flex-wrap: wrap;
    gap: 8px;
}

.inventory-card.compact .card-info {
    gap: 4px;
}

.edit-gallery-select {
    margin-top: 10px;
    width: 100%;
    padding: 10px;
    font-size: 14px;
}

/* åœ¨åº«ã‚«ãƒ¼ãƒ‰ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å¼·åŒ– */
.card-main {
    display: flex;
    gap: 20px;
    align-items: stretch;
    flex-wrap: wrap;
}

.card-image-wrapper {
    flex: 0 0 180px;
}

.card-image-large {
    width: 100%;
    height: 140px;
    border-radius: 12px;
    object-fit: cover;
    background: #f0f0f0;
    box-shadow: inset 0 0 0 1px rgba(0,0,0,0.05);
}

.card-info {
    flex: 1 1 320px;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.card-title-row {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    font-size: 18px;
    font-weight: 600;
    color: #222;
}

.card-meta-row {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    font-size: 13px;
    color: #555;
}

.card-row {
    margin-bottom: 8px;
    font-size: 14px;
    line-height: 1.5;
}

.card-row strong {
    color: #333;
    font-weight: 600;
}

.status-row {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 4px;
}

.status-pill {
    display: inline-flex;
    align-items: center;
    padding: 6px 12px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 600;
}

.status-safe {
    background: #e8f5e9;
    color: #1b5e20;
}

.status-alert {
    background: #ffebee;
    color: #b71c1c;
}

.status-success {
    background: #e3f2fd;
    color: #0d47a1;
}

.status-warning {
    background: #fff8e1;
    color: #ff6f00;
}

.status-info {
    background: #ede7f6;
    color: #4527a0;
}

.status-neutral {
    background: #eceff1;
    color: #455a64;
}

.card-actions {
    flex: 0 0 150px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    justify-content: center;
}

.action-btn {
    border: none;
    border-radius: 10px;
    padding: 10px 12px;
    font-size: 14px;
    font-weight: 600;
    color: white;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: transform 0.2s, box-shadow 0.2s;
}

.action-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.action-outbound {
    background: #ef5350;
}

.action-inbound {
    background: #66bb6a;
}

.action-order {
    background: #42a5f5;
}

.quick-item-card {
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    padding: 12px;
    font-size: 13px;
    line-height: 1.6;
}

/* ã‚«ãƒ¡ãƒ©ãƒ¢ãƒ¼ãƒ€ãƒ« */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.7);
    animation: fadeIn 0.3s;
    justify-content: center;
    align-items: center;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal-content {
    background: white;
    margin: 0;
    max-width: 600px;
    width: 90%;
    border-radius: 16px;
    overflow: hidden;
    animation: slideUp 0.3s;
    max-height: 90vh;
    overflow-y: auto;
}

@keyframes slideUp {
    from {
        transform: translateY(50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: #009688;
    color: white;
}

.modal-header h2,
.modal-header h3 {
    font-size: 20px;
    margin: 0;
}

.close-btn {
    background: none;
    border: none;
    color: white;
    font-size: 32px;
    cursor: pointer;
    line-height: 1;
    padding: 0;
    width: 32px;
    height: 32px;
}

.modal-body {
    padding: 20px;
}

#cameraVideo {
    width: 100%;
    max-height: 400px;
    border-radius: 8px;
    background: #000;
}

.modal-footer {
    padding: 20px;
    text-align: center;
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
@media (max-width: 768px) {
    .filter-row {
        grid-template-columns: 1fr;
    }

    .card-content {
        flex-direction: column;
    }

    .card-image {
        width: 100%;
        height: 150px;
    }

    .modal-content {
        margin: 10% 10px;
        max-width: calc(100% - 20px);
    }
}

/* ç©ºã®çŠ¶æ…‹ */
.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #999;
}

.empty-state p {
    font-size: 16px;
    margin-bottom: 12px;
}

/* å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ« */
.table-container {
    overflow-x: auto;
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    margin-top: 20px;
}

.history-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 800px;
}

.history-table thead {
    background: #009688;
    color: white;
}

.history-table th {
    padding: 12px;
    text-align: left;
    font-weight: 600;
    font-size: 14px;
    white-space: nowrap;
}

.history-table tbody tr {
    border-bottom: 1px solid #e0e0e0;
    transition: background-color 0.2s;
}

.history-table tbody tr:hover {
    background-color: #f5f5f5;
}

.history-table td {
    padding: 12px;
    font-size: 14px;
}

.history-table td.loading {
    text-align: center;
    padding: 40px;
    color: #999;
}

/* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
.nav-menu {
    scrollbar-width: thin;
    scrollbar-color: #009688 #f0f0f0;
}

.nav-menu::-webkit-scrollbar {
    height: 4px;
}

.nav-menu::-webkit-scrollbar-track {
    background: #f0f0f0;
}

.nav-menu::-webkit-scrollbar-thumb {
    background: #009688;
    border-radius: 2px;
}

/* ã‚¿ãƒ–ãŒå¤šã„å ´åˆã®å¯¾å¿œ */
@media (max-width: 1200px) {
    .nav-btn {
        min-width: 100px;
        font-size: 13px;
        padding: 14px 10px;
    }
}

@media (max-width: 900px) {
    .nav-btn {
        min-width: 80px;
        font-size: 12px;
        padding: 12px 8px;
    }
}

/* å¾“æ¥­å“¡ãƒ†ãƒ¼ãƒ–ãƒ« */
.employees-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 900px;
}

.employees-table thead {
    background: #009688;
    color: white;
}

.employees-table th {
    padding: 12px;
    text-align: left;
    font-weight: 600;
    font-size: 14px;
    white-space: nowrap;
}

.employees-table tbody tr {
    border-bottom: 1px solid #e0e0e0;
    transition: background-color 0.2s;
}

.employees-table tbody tr:hover {
    background-color: #f5f5f5;
}

.employees-table td {
    padding: 12px;
    font-size: 14px;
}

.employees-table td.loading,
.employees-table td.error {
    text-align: center;
    padding: 40px;
    color: #999;
}

.employees-table td.error {
    color: #d32f2f;
}

/* å°ã•ã„ãƒœã‚¿ãƒ³ */
.btn-small {
    padding: 4px 8px;
    font-size: 14px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    background: #f5f5f5;
}

.btn-small:hover {
    transform: scale(1.1);
}

.btn-edit:hover {
    background: #2196f3;
    filter: brightness(1.2);
}

.btn-delete:hover {
    background: #f44336;
    filter: brightness(1.2);
}
</style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="header">
        <div>
            <h1 id="pageTitle">æ¶ˆè€—å“åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
            <p class="subtitle">PowerAppsç‰ˆã‚’Flask + JavaScriptã§å†ç¾</p>
        </div>
        <div class="header-user-info">
            <span id="currentUserName">èª­ã¿è¾¼ã¿ä¸­...</span>
            <button class="btn btn-outline btn-sm" onclick="openChangePasswordModal()">ğŸ”‘ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´</button>
            <button class="btn btn-secondary btn-sm" onclick="logout()">ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </div>
    </header>

    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <nav class="nav-menu">
        <button class="nav-btn active" data-page="inventory">åœ¨åº«ä¸€è¦§</button>
        <button class="nav-btn" data-page="register"> æ¶ˆè€—å“ç®¡ç†</button>
        <button class="nav-btn" data-page="operations">â†•ï¸ å…¥å‡ºåº«</button>
        <button class="nav-btn" data-page="order">æ³¨æ–‡ä¾é ¼</button>
        <button class="nav-btn" data-page="order-list">ç™ºæ³¨çŠ¶æ…‹</button>
        <button class="nav-btn" data-page="dispatch">ç™ºæ³¨</button>
        <button class="nav-btn" data-page="suppliers">è³¼å…¥å…ˆç®¡ç†</button>
        <button class="nav-btn" data-page="employees">ğŸ‘¤ å¾“æ¥­å“¡</button>
        <button class="nav-btn" data-page="users">ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</button>
    </nav>

    <!-- å…¥å‡ºåº«ã‚µãƒ–ã‚¿ãƒ– -->
    <div class="subtab-container" id="operationsSubtabContainer" style="display: none;">
        <div class="subtab-group">
            <button class="subtab-btn active" data-subtab="inbound">ğŸ“¥ å…¥åº«</button>
            <button class="subtab-btn" data-subtab="outbound">ğŸ“¤ å‡ºåº«</button>
            <button class="subtab-btn" data-subtab="history">ğŸ“‹ å…¥å‡ºåº«å±¥æ­´</button>
        </div>
    </div>

    <!-- åœ¨åº«ä¸€è¦§ãƒšãƒ¼ã‚¸ -->
    <div id="inventoryPage" class="page-content active">
    <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚¨ãƒªã‚¢ -->
    <div class="filter-container">
        <h2>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</h2>

        <div class="filter-group">
            <label for="qrCodeInput">QRã‚³ãƒ¼ãƒ‰æ¤œç´¢</label>
            <input
                type="text"
                id="qrCodeInput"
                placeholder="QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚‹ / æ‰‹å…¥åŠ›"
                class="input-field"
            >
        </div>

        <div class="button-group">
            <button id="clearQrBtn" class="btn btn-secondary">
                å‰Šé™¤ QRã‚³ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªã‚¢
            </button>
            <button id="scanQrBtn" class="btn btn-primary">
                QR QRã‚¹ã‚­ãƒ£ãƒ³
            </button>

            
        </div>

        <div class="filter-group">
            <label for="searchInput">å“åæ¤œç´¢</label>
            <input
                type="text"
                id="searchInput"
                placeholder="å“åã‚’æ¤œç´¢ã§ãã¾ã™"
                class="input-field"
            >
        </div>

        <div class="filter-row">
            <div class="filter-group">
                <label for="orderStatus">æ³¨æ–‡çŠ¶æ…‹</label>
                <select id="orderStatus" class="input-field">
                    <option value="ã™ã¹ã¦">ã™ã¹ã¦</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="shortageStatus">æ¬ å“çŠ¶æ…‹</label>
                <select id="shortageStatus" class="input-field">
                    <option value="ã™ã¹ã¦">ã™ã¹ã¦</option>
                </select>
            </div>
        </div>
    </div>

    <!-- è¡¨ç¤ºä»¶æ•° -->
    <div class="count-info">
        <p id="countInfo">è¡¨ç¤ºä»¶æ•°: 0 / 0</p>
    </div>

    <!-- åœ¨åº«ä¸€è¦§ -->
    <div id="inventoryList" class="inventory-list">
        <p class="loading">èª­ã¿è¾¼ã¿ä¸­...</p>
    </div>
    </div><!-- åœ¨åº«ä¸€è¦§ãƒšãƒ¼ã‚¸çµ‚äº† -->

    <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒšãƒ¼ã‚¸ -->
    <div id="usersPage" class="page-content">
        <div class="page-header">
            <h2>ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</h2>
            <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ãƒ­ãƒ¼ãƒ«ã‚’ç®¡ç†ã—ã¾ã™</p>
        </div>

        <div class="subtab-group" id="usersSubtabs">
            <button class="subtab-btn active" data-user-tab="list">ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§</button>
            <button class="subtab-btn" data-user-tab="add">â• æ–°è¦ç™»éŒ²</button>
            <button class="subtab-btn" data-user-tab="roles">ğŸ“‹ ãƒ­ãƒ¼ãƒ«ç®¡ç†</button>
            <button class="subtab-btn" data-user-tab="permissions">ğŸ”§ æ¨©é™è¨­å®š</button>
        </div>

        <div id="usersListSection" class="detail-tab-content" data-user-content="list">
            <div class="table-container">
                <table class="employees-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>ãƒ¦ãƒ¼ã‚¶ãƒ¼å</th>
                            <th>æ°å</th>
                            <th>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</th>
                            <th>å½¹è·</th>
                            <th>çŠ¶æ…‹</th>
                            <th>ä½œæˆæ—¥</th>
                            <th>æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <tr>
                            <td colspan="9" class="loading">èª­ã¿è¾¼ã¿ä¸­...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="usersAddSection" class="detail-tab-content" data-user-content="add" hidden>
            <div class="form-container">
                <h3 class="section-title">æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²</h3>
                <div class="filter-group">
                    <label for="userUsername">ãƒ¦ãƒ¼ã‚¶ãƒ¼å *</label>
                    <input type="text" id="userUsername" class="input-field" placeholder="ä¾‹: yamada" required>
                </div>
                <div class="filter-group">
                    <label for="userFullName">æ°å *</label>
                    <input type="text" id="userFullName" class="input-field" placeholder="ä¾‹: å±±ç”° å¤ªéƒ" required>
                </div>
                <div class="filter-group">
                    <label for="userEmail">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                    <input type="email" id="userEmail" class="input-field" placeholder="yamada@example.com">
                </div>
                <div class="filter-group">
                    <label for="userPassword">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ *</label>
                    <input type="password" id="userPassword" class="input-field" placeholder="6æ–‡å­—ä»¥ä¸Š" required>
                </div>
                <div class="filter-group">
                    <label>å½¹è·ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
                    <div id="userRolesCheckboxes" class="checkbox-group">
                        <!-- ãƒ­ãƒ¼ãƒ«ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¯å‹•çš„ã«ç”Ÿæˆ -->
                    </div>
                </div>
                <div class="filter-group">
                    <label for="userActive">çŠ¶æ…‹</label>
                    <select id="userActive" class="input-field">
                        <option value="active">æœ‰åŠ¹</option>
                        <option value="inactive">ç„¡åŠ¹</option>
                    </select>
                </div>
                <button id="userSubmitBtn" class="btn btn-primary primary-action" type="button">
                    âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç™»éŒ²ã™ã‚‹
                </button>
            </div>
        </div>

        <div id="usersRolesSection" class="detail-tab-content" data-user-content="roles" hidden>
            <div class="form-container">
                <h3 class="section-title">ãƒ­ãƒ¼ãƒ«ä¸€è¦§</h3>
                <div class="table-container">
                    <table class="employees-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>ãƒ­ãƒ¼ãƒ«å</th>
                                <th>èª¬æ˜</th>
                                <th>ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</th>
                                <th>ä½œæˆæ—¥</th>
                            </tr>
                        </thead>
                        <tbody id="rolesTableBody">
                            <tr>
                                <td colspan="5" class="loading">èª­ã¿è¾¼ã¿ä¸­...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ­ãƒ¼ãƒ«ã‚’å‰²ã‚Šå½“ã¦ -->
                <h3 class="section-title" style="margin-top: 40px;">ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ­ãƒ¼ãƒ«ã‚’å‰²ã‚Šå½“ã¦</h3>
                <div class="filter-row" style="align-items: flex-end; gap: 12px;">
                    <div class="filter-group" style="flex: 1; max-width: 300px;">
                        <label for="assignUserSelect">ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠ</label>
                        <select id="assignUserSelect" class="input-field">
                            <option value="">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠ...</option>
                        </select>
                    </div>
                    <div class="filter-group" style="flex: 1; max-width: 300px;">
                        <label for="assignRoleSelect">ãƒ­ãƒ¼ãƒ«é¸æŠ</label>
                        <select id="assignRoleSelect" class="input-field">
                            <option value="">ãƒ­ãƒ¼ãƒ«ã‚’é¸æŠ...</option>
                        </select>
                    </div>
                    <button id="assignRoleBtn" class="btn btn-primary" onclick="assignRoleToUser()">ğŸ”„ ãƒ­ãƒ¼ãƒ«å‰²ã‚Šå½“ã¦</button>
                </div>

                <!-- é¸æŠã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾åœ¨ã®ãƒ­ãƒ¼ãƒ« -->
                <div id="currentUserRoles" style="margin-top: 20px; padding: 16px; background: #f5f5f5; border-radius: 8px; display: none;">
                    <h4 style="margin: 0 0 12px 0; font-size: 14px; color: #333;">ç¾åœ¨ã®ãƒ­ãƒ¼ãƒ«</h4>
                    <div id="currentRolesList" style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <!-- ç¾åœ¨ã®ãƒ­ãƒ¼ãƒ«ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                    </div>
                </div>
            </div>
        </div>

        <div id="usersPermissionsSection" class="detail-tab-content" data-user-content="permissions" hidden>
            <div class="form-container">
                <h3 class="section-title">æ¨©é™è¨­å®š</h3>
                <p style="color: #666; margin-bottom: 20px;">é¸æŠã—ãŸãƒ­ãƒ¼ãƒ«ã®ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’ç·¨é›†ã§ãã¾ã™</p>

                <!-- ãƒ­ãƒ¼ãƒ«é¸æŠ -->
                <div class="filter-group" style="max-width: 300px; margin-bottom: 24px;">
                    <label for="permissionRoleSelect">ãƒ­ãƒ¼ãƒ«é¸æŠ</label>
                    <select id="permissionRoleSelect" class="input-field" onchange="loadPermissionsForRole()">
                        <option value="">ãƒ­ãƒ¼ãƒ«ã‚’é¸æŠ...</option>
                    </select>
                </div>

                <div id="permissionsEditorContainer" style="display: none;">
                    <!-- ãƒšãƒ¼ã‚¸æ¨©é™ -->
                    <div style="margin-bottom: 32px;">
                        <h4 style="margin: 0 0 16px 0; font-size: 16px; color: #333;">ğŸ“„ ãƒšãƒ¼ã‚¸æ¨©é™</h4>
                        <div class="table-container">
                            <table class="employees-table">
                                <thead>
                                    <tr>
                                        <th style="width: 200px;">ãƒšãƒ¼ã‚¸å</th>
                                        <th style="width: 100px; text-align: center;">é–²è¦§</th>
                                        <th style="width: 100px; text-align: center;">ç·¨é›†</th>
                                    </tr>
                                </thead>
                                <tbody id="pagePermissionsTableBody">
                                    <!-- ãƒšãƒ¼ã‚¸æ¨©é™ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ã‚¿ãƒ–æ¨©é™ -->
                    <div style="margin-bottom: 24px;">
                        <h4 style="margin: 0 0 16px 0; font-size: 16px; color: #333;">ğŸ“‘ ã‚¿ãƒ–æ¨©é™</h4>
                        <div class="table-container">
                            <table class="employees-table">
                                <thead>
                                    <tr>
                                        <th style="width: 200px;">ã‚¿ãƒ–å</th>
                                        <th style="width: 100px; text-align: center;">é–²è¦§</th>
                                        <th style="width: 100px; text-align: center;">ç·¨é›†</th>
                                    </tr>
                                </thead>
                                <tbody id="tabPermissionsTableBody">
                                    <!-- ã‚¿ãƒ–æ¨©é™ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ä¿å­˜ãƒœã‚¿ãƒ³ -->
                    <div style="text-align: left;">
                        <button id="savePermissionsBtn" class="btn btn-primary primary-action" onclick="savePermissions()">ğŸ’¾ ãƒšãƒ¼ã‚¸æ¨©é™ã‚’ä¿å­˜</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="userEditModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3>ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®ç·¨é›†</h3>
                <button class="close-btn" onclick="closeUserEditModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="editUserId">
                <div class="filter-group">
                    <label for="editUserUsername">ãƒ¦ãƒ¼ã‚¶ãƒ¼å *</label>
                    <input type="text" id="editUserUsername" class="input-field" required>
                </div>
                <div class="filter-group">
                    <label for="editUserFullName">æ°å *</label>
                    <input type="text" id="editUserFullName" class="input-field" required>
                </div>
                <div class="filter-group">
                    <label for="editUserEmail">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                    <input type="email" id="editUserEmail" class="input-field">
                </div>
                <div class="filter-group">
                    <label for="editUserPassword">æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                    <input type="password" id="editUserPassword" class="input-field" placeholder="å¤‰æ›´ã™ã‚‹å ´åˆã®ã¿å…¥åŠ›">
                </div>
                <div class="filter-group">
                    <label>å½¹è·ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
                    <div id="editUserRolesCheckboxes" class="checkbox-group">
                        <!-- ãƒ­ãƒ¼ãƒ«ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¯å‹•çš„ã«ç”Ÿæˆ -->
                    </div>
                </div>
                <div class="filter-group">
                    <label for="editUserActive">çŠ¶æ…‹</label>
                    <select id="editUserActive" class="input-field">
                        <option value="active">æœ‰åŠ¹</option>
                        <option value="inactive">ç„¡åŠ¹</option>
                    </select>
                </div>
                <div style="display: flex; gap: 12px; margin-top: 20px;">
                    <button id="userUpdateBtn" class="btn btn-primary primary-action" type="button">ğŸ’¾ æ›´æ–°ã™ã‚‹</button>
                    <button class="btn btn-outline" onclick="closeUserEditModal()" type="button">âœ– ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="changePasswordModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>ğŸ”‘ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´</h3>
                <button class="close-btn" onclick="closeChangePasswordModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="filter-group">
                    <label for="currentPassword">ç¾åœ¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ *</label>
                    <input type="password" id="currentPassword" class="input-field" required>
                </div>
                <div class="filter-group">
                    <label for="newPassword">æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ *</label>
                    <input type="password" id="newPassword" class="input-field" placeholder="6æ–‡å­—ä»¥ä¸Š" required>
                </div>
                <div class="filter-group">
                    <label for="confirmPassword">æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆç¢ºèªï¼‰*</label>
                    <input type="password" id="confirmPassword" class="input-field" placeholder="å†åº¦å…¥åŠ›ã—ã¦ãã ã•ã„" required>
                </div>
                <div style="display: flex; gap: 12px; margin-top: 20px;">
                    <button id="changePasswordBtn" class="btn btn-primary primary-action" type="button" onclick="changePassword()">ğŸ” å¤‰æ›´ã™ã‚‹</button>
                    <button class="btn btn-outline" onclick="closeChangePasswordModal()" type="button">âœ– ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
            </div>
        </div>
    </div>

    <!-- registerPage -->
    <div id="registerPage" class="page-content">
        <div class="page-header">
            <h2>ğŸ§° æ¶ˆè€—å“ç®¡ç†</h2>
            <p>æ–°è¦ç™»éŒ²ã¨å€‹åˆ¥ç·¨é›†ã‚’ã‚¿ãƒ–ã§åˆ‡ã‚Šæ›¿ãˆã€åœ¨åº«ãƒã‚¹ã‚¿ã‚’æ•´ç†ã§ãã¾ã™ã€‚</p>
        </div>

        <div class="subtab-group" id="registerSubtabs">
            <button class="subtab-btn active" data-detail-tab="create">ğŸ†• æ–°è¦ç™»éŒ²</button>
            <button class="subtab-btn" data-detail-tab="edit">ğŸ›  å€‹åˆ¥ç·¨é›†</button>
        </div>

        <div id="registerFormSection" class="form-container detail-tab-content" data-detail-tab-content="create">
            <h3 class="section-title">åŸºæœ¬æƒ…å ±ã®å…¥åŠ›</h3>

            <div class="filter-group">
                <label for="registerCode">ã‚³ãƒ¼ãƒ‰ *</label>
                <input type="text" id="registerCode" class="input-field" placeholder="ä¾‹: TIP-12-EG-1" required>
            </div>
            <div class="filter-group">
                <label for="registerOrderCode">ç™ºæ³¨ã‚³ãƒ¼ãƒ‰</label>
                <input type="text" id="registerOrderCode" class="input-field" placeholder="ä»»æ„ã§è¨­å®šã§ãã¾ã™">
            </div>
            <div class="filter-group">
                <label for="registerName">å“å *</label>
                <input type="text" id="registerName" class="input-field" placeholder="å“åã‚’å…¥åŠ›" required>
            </div>
            <div class="filter-group">
                <label for="registerCategory">ã‚«ãƒ†ã‚´ãƒª</label>
                <input type="text" id="registerCategory" class="input-field" placeholder="ä¾‹: äº‹å‹™ç”¨å“">
            </div>
            <div class="filter-group">
                <label for="registerUnit">å˜ä½</label>
                <input type="text" id="registerUnit" class="input-field" placeholder="å€‹ / ç®±ãªã©" value="å€‹">
            </div>
            <div class="filter-group">
                <label for="registerStockQty">åœ¨åº«æ•°</label>
                <input type="number" id="registerStockQty" class="input-field" placeholder="0" value="0" min="0">
            </div>
            <div class="filter-group">
                <label for="registerSafetyStock">å®‰å…¨åœ¨åº«</label>
                <input type="number" id="registerSafetyStock" class="input-field" placeholder="0" value="0" min="0">
            </div>
            <div class="filter-group">
                <label for="registerUnitPrice">å˜ä¾¡</label>
                <input type="number" id="registerUnitPrice" class="input-field" placeholder="0" value="0" min="0">
            </div>
            <div class="filter-group">
                <label for="registerOrderUnit">ç™ºæ³¨å˜ä½</label>
                <input type="number" id="registerOrderUnit" class="input-field" placeholder="1" value="1" min="1">
            </div>
            <div class="filter-group">
                <label for="registerSupplier">è³¼å…¥å…ˆ</label>
                <select id="registerSupplier" class="input-field">
                    <option value="">-- è³¼å…¥å…ˆã‚’é¸æŠ --</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="registerStorageLocation">ä¿ç®¡å ´æ‰€</label>
                <input type="text" id="registerStorageLocation" class="input-field" placeholder="å€‰åº«ãƒ»æ£šç•ªå·ãªã©">
            </div>
            <div class="filter-group image-upload-group">
                <label for="registerImage">å•†å“ç”»åƒ</label>
                <input type="file" id="registerImage" class="input-field file-input" accept="image/*">
                <input type="hidden" id="registerImagePath">
                <div class="image-preview" id="registerImagePreviewBox" hidden>
                    <img src="" alt="å•†å“ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                </div>
                <div class="image-upload-actions">
                    <button type="button" class="btn btn-secondary" id="registerImageClearBtn">ç”»åƒã‚’ã‚¯ãƒªã‚¢</button>
                </div>
                <small class="import-hint">PNG/JPG/GIF æœ€å¤§ 5MB ã¾ã§</small>
            </div>
            <div class="filter-group">
                <label for="registerNote">å‚™è€ƒ</label>
                <textarea id="registerNote" class="input-field" rows="3" placeholder="ä»»æ„"></textarea>
            </div>
            <button id="registerSubmitBtn" class="btn btn-primary primary-action" type="button">
                ğŸ’¾ æ–°è¦ç™»éŒ²ã™ã‚‹
            </button>

            <div class="import-section">
                <h3>CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h3>
                <p class="import-note">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«æ²¿ã£ã¦å…¥åŠ›ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã¾ã™ã€‚</p>
                <input type="file" id="csvFileInput" class="input-field file-input" accept=".csv">
                <div class="import-actions">
                    <button id="csvImportBtn" class="btn btn-outline" type="button">CSVã‚’èª­ã¿è¾¼ã‚€</button>
                    <button id="csvTemplateDownloadBtn" class="btn btn-outline" type="button">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                </div>
                <small class="import-hint">å¿…é ˆåˆ—: ã‚³ãƒ¼ãƒ‰ / å“åã€‚UTF-8 ã§ä¿å­˜ã—ã¦ãã ã•ã„ã€‚</small>
            </div>
        </div>

        <div id="editFormSection" class="detail-tab-content" data-detail-tab-content="edit" hidden>
            <div class="form-container">
                <h3 class="section-title">ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‹ã‚‰é¸æŠ</h3>
                <div class="filter-group">
                    <label for="editSearchCode">ã‚³ãƒ¼ãƒ‰ / å“åã§æ¤œç´¢</label>
                    <div class="input-with-button">
                        <input type="text" id="editSearchCode" class="input-field" placeholder="ä¾‹: TIP ã¾ãŸã¯ æ‰‹è¢‹">
                        <button id="editLoadBtn" class="btn btn-secondary" type="button">ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’æ›´æ–°</button>
                    </div>
                    <small class="import-hint">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æœªå…¥åŠ›ã®å ´åˆã¯å…¨ä»¶ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</small>
                </div>
                <div id="editGalleryContainer" class="inventory-list compact">
                    <p class="loading">æ¶ˆè€—å“ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>
            </div>

            <div class="form-container">
                <h3 class="section-title">é¸æŠä¸­ã®ã‚¢ã‚¤ãƒ†ãƒ </h3>
                <div id="editItemPreview" class="quick-item-card" hidden></div>
                <div id="editFormFields" hidden>
                    <div class="filter-group">
                        <label for="editCode">ã‚³ãƒ¼ãƒ‰ *</label>
                        <input type="text" id="editCode" class="input-field" placeholder="ã‚³ãƒ¼ãƒ‰" readonly style="background-color: #f5f5f5;">
                        <small class="import-hint">ã‚³ãƒ¼ãƒ‰ã¯å¤‰æ›´ã§ãã¾ã›ã‚“</small>
                    </div>
                    <div class="filter-group">
                        <label for="editOrderCode">ç™ºæ³¨ã‚³ãƒ¼ãƒ‰</label>
                        <input type="text" id="editOrderCode" class="input-field" placeholder="ä»»æ„ã§è¨­å®šã§ãã¾ã™">
                    </div>
                    <div class="filter-group">
                        <label for="editName">å“å *</label>
                        <input type="text" id="editName" class="input-field" placeholder="å“åã‚’å…¥åŠ›" required>
                    </div>
                    <div class="filter-group">
                        <label for="editCategory">ã‚«ãƒ†ã‚´ãƒª</label>
                        <input type="text" id="editCategory" class="input-field" placeholder="ä¾‹: äº‹å‹™ç”¨å“">
                    </div>
                    <div class="filter-group">
                        <label for="editUnit">å˜ä½</label>
                        <input type="text" id="editUnit" class="input-field" placeholder="å€‹ / ç®±ãªã©">
                    </div>
                    <div class="filter-group">
                        <label for="editStockQty">åœ¨åº«æ•°</label>
                        <input type="number" id="editStockQty" class="input-field" placeholder="0" min="0">
                    </div>
                    <div class="filter-group">
                        <label for="editSafetyStock">å®‰å…¨åœ¨åº«</label>
                        <input type="number" id="editSafetyStock" class="input-field" placeholder="0" min="0">
                    </div>
                    <div class="filter-group">
                        <label for="editUnitPrice">å˜ä¾¡</label>
                        <input type="number" id="editUnitPrice" class="input-field" placeholder="0" min="0">
                    </div>
                    <div class="filter-group">
                        <label for="editOrderUnit">ç™ºæ³¨å˜ä½</label>
                        <input type="number" id="editOrderUnit" class="input-field" placeholder="1" min="1">
                    </div>
                    <div class="filter-group">
                        <label for="editSupplier">è³¼å…¥å…ˆ</label>
                        <select id="editSupplier" class="input-field">
                            <option value="">-- è³¼å…¥å…ˆã‚’é¸æŠ --</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="editStorageLocation">ä¿ç®¡å ´æ‰€</label>
                        <input type="text" id="editStorageLocation" class="input-field" placeholder="å€‰åº«ãƒ»æ£šç•ªå·ãªã©">
                    </div>
                    <div class="filter-group">
                        <label for="editShortageStatus">åœ¨åº«çŠ¶æ…‹</label>
                        <select id="editShortageStatus" class="input-field">
                            <option value="">-- åœ¨åº«çŠ¶æ…‹ã‚’é¸æŠ --</option>
                        </select>
                    </div>
                    <div class="filter-group image-upload-group">
                        <label for="editImage">å•†å“ç”»åƒ</label>
                        <input type="file" id="editImage" class="input-field file-input" accept="image/*">
                        <input type="hidden" id="editImagePath">
                        <div class="image-preview" id="editImagePreviewBox" hidden>
                            <img src="" alt="å•†å“ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                        </div>
                        <div class="image-upload-actions">
                            <button type="button" class="btn btn-secondary" id="editImageClearBtn">ç”»åƒã‚’ã‚¯ãƒªã‚¢</button>
                        </div>
                        <small class="import-hint">PNG/JPG/GIF æœ€å¤§ 5MB ã¾ã§</small>
                    </div>
                    <div class="filter-group">
                        <label for="editNote">å‚™è€ƒ</label>
                        <textarea id="editNote" class="input-field" rows="3" placeholder="ä»»æ„"></textarea>
                    </div>
                    <button id="editSubmitBtn" class="btn btn-primary primary-action" type="button">
                        ğŸ’¾ å†…å®¹ã‚’æ›´æ–°ã™ã‚‹
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- registerPage end -->

    <!-- å‡ºåº«ãƒšãƒ¼ã‚¸ -->
    <div id="outboundPage" class="page-content">
        <div class="page-header">
            <h2>å‡ºåº«</h2>
            <p>åœ¨åº«ã‹ã‚‰å•†å“ã‚’å‡ºåº«ã—ã¾ã™</p>
        </div>

        <div class="form-container">
            <div class="filter-group">
                <label for="outboundQrCode">QRã‚³ãƒ¼ãƒ‰æ¤œç´¢</label>
                <input type="text" id="outboundQrCode" class="input-field" placeholder="QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚‹">
                <button id="outboundScanBtn" class="btn btn-primary" style="margin-top: 10px; width: 100%;">
                    QR QRã‚¹ã‚­ãƒ£ãƒ³
                </button>
            </div>

            <div class="filter-group">
                <label for="outboundSearchText">å“åæ¤œç´¢</label>
                <input type="text" id="outboundSearchText" class="input-field" placeholder="å“åã§æ¤œç´¢">
            </div>

            <div id="outboundItemInfo" class="item-info" style="display: none;">
                <h3>å•†å“æƒ…å ±</h3>
                <div id="outboundItemDetails"></div>

                <div class="filter-group">
                    <label for="outboundQuantity">å‡ºåº«æ•°é‡</label>
                    <input type="number" id="outboundQuantity" class="input-field" min="1" placeholder="å‡ºåº«æ•°é‡ã‚’å…¥åŠ›">
                </div>

                <div class="filter-group">
                    <label for="outboundEmployeeCode">ç¤¾å“¡ã‚³ãƒ¼ãƒ‰</label>
                    <input type="text" id="outboundEmployeeCode" class="input-field" placeholder="ç¤¾å“¡ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
                    <small class="import-hint">ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨è‡ªå‹•ã§æ°åãƒ»éƒ¨ç½²ãŒå…¥åŠ›ã•ã‚Œã¾ã™</small>
                </div>

                <div class="filter-group">
                    <label for="outboundPerson">å‡ºåº«è€…</label>
                    <input type="text" id="outboundPerson" class="input-field" placeholder="å‡ºåº«è€…åã‚’å…¥åŠ›">
                </div>

                <div class="filter-group">
                    <label for="outboundDepartment">éƒ¨ç½²</label>
                    <input type="text" id="outboundDepartment" class="input-field" placeholder="éƒ¨ç½²åã‚’å…¥åŠ›ï¼ˆä»»æ„ï¼‰">
                </div>

                <div class="filter-group">
                    <label for="outboundNote">å‚™è€ƒ</label>
                    <textarea id="outboundNote" class="input-field" rows="3" placeholder="å‚™è€ƒï¼ˆä»»æ„ï¼‰"></textarea>
                </div>

                <button id="submitOutbound" class="btn btn-primary" style="width: 100%;">
                     å‡ºåº«ã‚’ç¢ºå®š
                </button>
            </div>
        </div>
    </div>

    <!-- å…¥åº«ãƒšãƒ¼ã‚¸ -->
    <div id="inboundPage" class="page-content">
        <div class="page-header">
            <h2>å…¥åº«</h2>
            <p>å•†å“ã‚’å…¥åº«ã—ã¾ã™</p>
        </div>

        <div class="button-group" style="margin: 20px;">
            <button class="btn btn-primary" id="showManualInbound">æ³¨æ–‡ æ‰‹å‹•å…¥åº«</button>
            <button class="btn btn-secondary" id="showAutoInbound"> è‡ªå‹•ä¾é ¼åˆ†</button>
        </div>

        <!-- æ‰‹å‹•å…¥åº« -->
        <div id="manualInboundForm" class="form-container">
            <h3>æ‰‹å‹•å…¥åº«</h3>

            <div class="filter-group">
                <label for="inboundQrCode">QRã‚³ãƒ¼ãƒ‰æ¤œç´¢</label>
                <input type="text" id="inboundQrCode" class="input-field" placeholder="QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚‹">
                <button id="inboundScanBtn" class="btn btn-primary" style="margin-top: 10px; width: 100%;">
                    QR QRã‚¹ã‚­ãƒ£ãƒ³
                </button>
            </div>

            <div class="filter-group">
                <label for="inboundSearchText">å“åæ¤œç´¢</label>
                <input type="text" id="inboundSearchText" class="input-field" placeholder="å“åã§æ¤œç´¢">
            </div>

            <div id="inboundItemInfo" class="item-info" style="display: none;">
                <h3>å•†å“æƒ…å ±</h3>
                <div id="inboundItemDetails"></div>

                <div class="filter-group">
                    <label for="inboundQuantity">å…¥åº«æ•°é‡</label>
                    <input type="number" id="inboundQuantity" class="input-field" min="1" placeholder="å…¥åº«æ•°é‡ã‚’å…¥åŠ›">
                </div>

                <div class="filter-group">
                    <label for="inboundEmployeeCode">ç¤¾å“¡ã‚³ãƒ¼ãƒ‰</label>
                    <input type="text" id="inboundEmployeeCode" class="input-field" placeholder="ç¤¾å“¡ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
                    <small class="import-hint">ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨è‡ªå‹•ã§æ°åãƒ»éƒ¨ç½²ãŒå…¥åŠ›ã•ã‚Œã¾ã™</small>
                </div>

                <div class="filter-group">
                    <label for="inboundPerson">å…¥åº«è€…</label>
                    <input type="text" id="inboundPerson" class="input-field" placeholder="å…¥åº«è€…åã‚’å…¥åŠ›">
                </div>

                <div class="filter-group">
                    <label for="inboundDepartment">éƒ¨ç½²</label>
                    <input type="text" id="inboundDepartment" class="input-field" placeholder="éƒ¨ç½²åã‚’å…¥åŠ›ï¼ˆä»»æ„ï¼‰">
                </div>

                <button id="submitInbound" class="btn btn-primary" style="width: 100%;">
                     å…¥åº«ã‚’ç¢ºå®š
                </button>
            </div>
        </div>

        <!-- è‡ªå‹•ä¾é ¼åˆ†å…¥åº« -->
        <div id="autoInboundList" class="form-container" style="display: none;">
            <h3>è‡ªå‹•ä¾é ¼åˆ†ã®å…¥åº«</h3>
            <div id="pendingOrdersList"></div>
        </div>
    </div>

    <!-- æ³¨æ–‡ä¾é ¼ãƒšãƒ¼ã‚¸ -->
    <div id="orderPage" class="page-content">
        <div class="page-header">
            <h2>æ³¨æ–‡ä¾é ¼</h2>
            <p>ä¸è¶³ã—ã¦ã„ã‚‹å•†å“ã®æ³¨æ–‡ã‚’ä¾é ¼ã—ã¾ã™</p>
        </div>

        <div class="form-container">
            <div class="filter-group">
                <label for="orderQrCode">QRã‚³ãƒ¼ãƒ‰æ¤œç´¢</label>
                <input type="text" id="orderQrCode" class="input-field" placeholder="QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚‹">
                <button id="orderScanBtn" class="btn btn-primary" style="margin-top: 10px; width: 100%;">
                    QR QRã‚¹ã‚­ãƒ£ãƒ³
                </button>
            </div>

            <div id="orderItemInfo" class="item-info" style="display: none;">
                <h3>å•†å“æƒ…å ±</h3>
                <div id="orderItemDetails"></div>

                <div class="filter-group">
                    <label for="orderQuantity">æ³¨æ–‡æ•°é‡</label>
                    <input type="number" id="orderQuantity" class="input-field" min="1" placeholder="æ³¨æ–‡æ•°é‡ã‚’å…¥åŠ›">
                </div>

                <div class="filter-group">
                    <label for="orderDeadline">ç´æœŸ</label>
                    <select id="orderDeadline" class="input-field">
                        <option value="æœ€çŸ­">æœ€çŸ­</option>
                        <option value="é€šå¸¸">é€šå¸¸</option>
                        <option value="ä½™è£•ã‚ã‚Š">ä½™è£•ã‚ã‚Š</option>
                    </select>
                </div>

                <div class="filter-group">
                <div class="filter-group">
                    <label for="orderEmployeeCode">ç™ºæ³¨ä¾é ¼è€…ã‚³ãƒ¼ãƒ‰</label>
                    <input type="text" id="orderEmployeeCode" class="input-field" placeholder="ç¤¾å“¡ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
                    <small class="import-hint">ã‚³ãƒ¼ãƒ‰å…¥åŠ›ã§ä¾é ¼è€…åãŒè‡ªå‹•å…¥åŠ›ã•ã‚Œã¾ã™</small>
                </div>

                    <label for="orderRequester">ç™ºæ³¨ä¾é ¼è€…</label>
                    <input type="text" id="orderRequester" class="input-field" placeholder="ä¾é ¼è€…åã‚’å…¥åŠ›">
                </div>

                <div class="filter-group">
                    <label for="orderNote">å‚™è€ƒ</label>
                    <textarea id="orderNote" class="input-field" rows="3" placeholder="å‚™è€ƒï¼ˆä»»æ„ï¼‰"></textarea>
                </div>

                <button id="submitOrder" class="btn btn-primary" style="width: 100%;">
                     æ³¨æ–‡ä¾é ¼ã‚’é€ä¿¡
                </button>
            </div>
        </div>
    </div>

    <!-- ç™ºæ³¨çŠ¶æ…‹ãƒªã‚¹ãƒˆãƒšãƒ¼ã‚¸ -->
    <div id="orderListPage" class="page-content">
        <div class="page-header">
            <h2>ä¸€è¦§ ç™ºæ³¨ä¾é ¼çŠ¶æ…‹ãƒªã‚¹ãƒˆ</h2>
            <p>ç™ºæ³¨ä¾é ¼ã®çŠ¶æ³ã‚’ç¢ºèªã—ã¾ã™</p>
        </div>

        <div class="button-group" style="margin: 20px;">
            <button class="btn btn-primary" id="showManualOrders"> äººã‹ã‚‰ã®ä¾é ¼</button>
            <button class="btn btn-secondary" id="showAutoOrders"> è‡ªå‹•ä¾é ¼åˆ†</button>
        </div>

        <!-- äººã‹ã‚‰ã®ä¾é ¼ãƒªã‚¹ãƒˆ -->
        <div id="manualOrdersList" class="list-container">
            <h3>äººã‹ã‚‰ã®ä¾é ¼</h3>
            <div id="manualOrdersContent"></div>
        </div>

        <!-- è‡ªå‹•ä¾é ¼åˆ†ãƒªã‚¹ãƒˆ -->
        <div id="autoOrdersList" class="list-container" style="display: none;">
            <h3>è‡ªå‹•ä¾é ¼åˆ†ï¼ˆç™ºæ³¨æ¸ˆã¿ï¼‰</h3>
            <div id="autoOrdersContent"></div>
        </div>
    </div>

    <!-- ç™ºæ³¨ãƒšãƒ¼ã‚¸ -->
    <div id="dispatchPage" class="page-content">
        <div class="page-header">
            <h2>ç™ºæ³¨ï¼ˆPDFä½œæˆãƒ»ãƒ¡ãƒ¼ãƒ«é€ä¿¡ï¼‰</h2>
            <p>æ³¨æ–‡æ›¸PDFã‚’ä½œæˆã—ã€è³¼å…¥å…ˆã«ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã—ã¾ã™</p>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—1: æ³¨æ–‡é¸æŠ -->
        <div class="form-container">
            <h3>ã‚¹ãƒ†ãƒƒãƒ—1: ç™ºæ³¨ã™ã‚‹æ³¨æ–‡ã‚’é¸æŠ</h3>

            <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
            <div style="background: #f5f5f5; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                <h4 style="margin-top: 0;">æ¤œç´¢ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</h4>

                <div class="filter-row" style="margin-bottom: 12px;">
                    <div class="filter-group">
                        <label for="dispatchQrCode">QRã‚³ãƒ¼ãƒ‰æ¤œç´¢</label>
                        <input type="text" id="dispatchQrCode" class="input-field"
                               placeholder="QRã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
                        <button id="dispatchScanBtn" class="btn btn-primary" style="margin-top: 10px; width: 100%;">
                            QR QRã‚¹ã‚­ãƒ£ãƒ³
                        </button>
                    </div>
                    <div class="filter-group">
                        <label for="dispatchSearchText">å“åæ¤œç´¢</label>
                        <input type="text" id="dispatchSearchText" class="input-field"
                               placeholder="å“åã‚’æ¤œç´¢">
                    </div>
                </div>

                <div class="filter-row">
                    <div class="filter-group">
                        <label for="dispatchSupplier">è³¼å…¥å…ˆ</label>
                        <select id="dispatchSupplier" class="input-field">
                            <option value="">ã™ã¹ã¦</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="dispatchOrderStatus">æ³¨æ–‡çŠ¶æ…‹</label>
                        <select id="dispatchOrderStatus" class="input-field">
                            <option value="">ã™ã¹ã¦</option>
                            <option value="ä¾é ¼ä¸­">ä¾é ¼ä¸­</option>
                            <option value="ç™ºæ³¨æ¸ˆ">ç™ºæ³¨æ¸ˆ</option>
                            <option value="å®Œäº†">å®Œäº†</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="button-group" style="margin-bottom: 16px;">
                <button class="btn btn-primary" onclick="loadDispatchOrders()">
                    å†èª­è¾¼ æ³¨æ–‡ã‚’èª­ã¿è¾¼ã¿
                </button>
                <button class="btn btn-secondary" onclick="selectAllOrders()">
                     ã™ã¹ã¦é¸æŠ
                </button>
                <button class="btn btn-secondary" onclick="clearAllOrders()">
                     ã™ã¹ã¦è§£é™¤
                </button>
            </div>

            <div id="dispatchOrdersList" style="max-height: 400px; overflow-y: auto; border: 1px solid #ddd; border-radius: 8px; padding: 12px;">
                <p class="loading">æ³¨æ–‡ã‚’èª­ã¿è¾¼ã‚€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</p>
            </div>

            <div id="selectedOrdersSummary" style="margin-top: 16px; padding: 12px; background: #f5f5f5; border-radius: 8px; display: none;">
                <strong>é¸æŠä¸­:</strong> <span id="selectedCount">0</span>ä»¶
                <span style="margin-left: 20px;"><strong>åˆè¨ˆé‡‘é¡:</strong> <span id="selectedTotal">0</span></span>
            </div>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—2: PDFè¨­å®š -->
        <div class="form-container" style="margin-top: 20px;">
            <h3>ã‚¹ãƒ†ãƒƒãƒ—2: æ³¨æ–‡æ›¸PDFè¨­å®š</h3>

            <div class="filter-group">
                <label for="dispatchOrderNumber">æ³¨æ–‡æ›¸ç•ªå·ï¼ˆä»»æ„ï¼‰</label>
                <input type="text" id="dispatchOrderNumber" class="input-field"
                       placeholder="ç©ºæ¬„ã®å ´åˆã¯è‡ªå‹•æ¡ç•ªã•ã‚Œã¾ã™">
            </div>

            <div class="filter-group">
                <label for="dispatchNotes">å‚™è€ƒ</label>
                <textarea id="dispatchNotes" class="input-field" rows="3"
                          placeholder="æ³¨æ–‡æ›¸ã«è¡¨ç¤ºã™ã‚‹å‚™è€ƒï¼ˆä»»æ„ï¼‰"></textarea>
            </div>

            <button class="btn btn-secondary" onclick="generatePDFOnly()" style="width: 100%;">
                å¸³ç¥¨ PDFã®ã¿ç”Ÿæˆï¼ˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰
            </button>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ¡ãƒ¼ãƒ«è¨­å®š -->
        <div class="form-container" style="margin-top: 20px;">
            <h3>ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ¡ãƒ¼ãƒ«é€ä¿¡è¨­å®š</h3>

            <div class="filter-group">
                <label for="dispatchEmailTo">å®›å…ˆï¼ˆToï¼‰ *</label>
                <input type="email" id="dispatchEmailTo" class="input-field"
                       placeholder="supplier@example.com" required>
                <small style="color: #666;">è¤‡æ•°æŒ‡å®šã™ã‚‹å ´åˆã¯ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š</small>
            </div>

            <div class="filter-row">
                <div class="filter-group">
                    <label for="dispatchEmailCc">CCï¼ˆä»»æ„ï¼‰</label>
                    <input type="text" id="dispatchEmailCc" class="input-field"
                           placeholder="cc@example.com">
                </div>
                <div class="filter-group">
                    <label for="dispatchEmailBcc">BCCï¼ˆä»»æ„ï¼‰</label>
                    <input type="text" id="dispatchEmailBcc" class="input-field"
                           placeholder="bcc@example.com">
                </div>
            </div>

            <div class="filter-group">
                <label for="dispatchEmailSubject">ä»¶å *</label>
                <input type="text" id="dispatchEmailSubject" class="input-field"
                       placeholder="ã€æ³¨æ–‡æ›¸é€ä»˜ã€‘ã€‡ã€‡å•†äº‹å¾¡ä¸­" required>
            </div>

            <div class="filter-group">
                <label for="dispatchEmailBody">æœ¬æ–‡ *</label>
                <textarea id="dispatchEmailBody" class="input-field" rows="6"
                          placeholder="ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ã€‚&#10;&#10;æ³¨æ–‡æ›¸ã‚’ãŠé€ã‚Šã„ãŸã—ã¾ã™ã€‚&#10;ã”ç¢ºèªã®ã»ã©ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚" required></textarea>
            </div>

            <div class="filter-group">
                <label>
                    <input type="checkbox" id="dispatchSavePdf" checked>
                    PDFã‚’ã‚µãƒ¼ãƒãƒ¼ã«ä¿å­˜ã™ã‚‹
                </label>
            </div>

            <button class="btn btn-primary" onclick="dispatchOrdersWithEmail()"
                    style="width: 100%; font-size: 18px; padding: 16px;">
                ç™ºæ³¨ æ³¨æ–‡æ›¸ã‚’ä½œæˆã—ã¦ãƒ¡ãƒ¼ãƒ«é€ä¿¡
            </button>
        </div>

        <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div id="dispatchResult" style="margin-top: 20px; display: none;">
            <div class="form-container">
                <h3> ç™ºæ³¨å®Œäº†</h3>
                <div id="dispatchResultContent"></div>
            </div>
        </div>
    </div>

    <!-- è³¼å…¥å…ˆç®¡ç†ãƒšãƒ¼ã‚¸ -->
    <div id="suppliersPage" class="page-content">
        <div class="page-header">
            <h2>ğŸ¢ è³¼å…¥å…ˆç®¡ç†</h2>
            <p>è³¼å…¥å…ˆã®ç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ã‚’è¡Œã„ã¾ã™</p>
        </div>

        <div class="subtab-group" id="suppliersSubtabs">
            <button class="subtab-btn active" data-detail-tab="list">ğŸ“‹ è³¼å…¥å…ˆä¸€è¦§</button>
            <button class="subtab-btn" data-detail-tab="add">â• æ–°è¦è¿½åŠ </button>
            <button class="subtab-btn" data-detail-tab="edit" style="display: none;">âœï¸ ç·¨é›†</button>
        </div>

        <!-- è³¼å…¥å…ˆä¸€è¦§ -->
        <div id="suppliersListSection" class="detail-tab-content" data-detail-tab-content="list">
            <div class="form-container">
                <h3 class="section-title">ç™»éŒ²æ¸ˆã¿è³¼å…¥å…ˆ</h3>
                <div id="suppliersList" class="list-container">
                    <p class="loading">èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>
            </div>
        </div>

        <!-- æ–°è¦è¿½åŠ  -->
        <div id="suppliersAddSection" class="detail-tab-content" data-detail-tab-content="add" hidden>
            <div class="form-container">
                <h3 class="section-title">è³¼å…¥å…ˆæƒ…å ±ã®å…¥åŠ›</h3>

                <div class="filter-group">
                    <label for="supplierName">è³¼å…¥å…ˆå *</label>
                    <input type="text" id="supplierName" class="input-field" placeholder="ä¾‹: æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«å•†äº‹" required>
                </div>

                <div class="filter-group">
                    <label for="supplierContact">é€£çµ¡å…ˆ</label>
                    <input type="text" id="supplierContact" class="input-field" placeholder="æ‹…å½“è€…åãƒ»é›»è©±ç•ªå·ãªã©">
                </div>

                <div class="filter-group">
                    <label for="supplierEmail">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                    <input type="email" id="supplierEmail" class="input-field" placeholder="order@example.com">
                </div>

                <div class="filter-group">
                    <label for="supplierAddress">ä½æ‰€</label>
                    <textarea id="supplierAddress" class="input-field" rows="3" placeholder="ä½æ‰€ï¼ˆä»»æ„ï¼‰"></textarea>
                </div>

                <div class="filter-group">
                    <label for="supplierNote">å‚™è€ƒ</label>
                    <textarea id="supplierNote" class="input-field" rows="3" placeholder="å‚™è€ƒï¼ˆä»»æ„ï¼‰"></textarea>
                </div>

                <button id="supplierSubmitBtn" class="btn btn-primary primary-action" type="button">
                    ğŸ’¾ è³¼å…¥å…ˆã‚’ç™»éŒ²ã™ã‚‹
                </button>
            </div>
        </div>

        <!-- ç·¨é›† -->
        <div id="suppliersEditSection" class="detail-tab-content" data-detail-tab-content="edit" hidden>
            <div class="form-container">
                <h3 class="section-title">è³¼å…¥å…ˆæƒ…å ±ã®ç·¨é›†</h3>

                <input type="hidden" id="editSupplierId">

                <div class="filter-group">
                    <label for="editSupplierName">è³¼å…¥å…ˆå *</label>
                    <input type="text" id="editSupplierName" class="input-field" placeholder="ä¾‹: æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«å•†äº‹" required>
                </div>

                <div class="filter-group">
                    <label for="editSupplierContact">é€£çµ¡å…ˆ</label>
                    <input type="text" id="editSupplierContact" class="input-field" placeholder="æ‹…å½“è€…åãƒ»é›»è©±ç•ªå·ãªã©">
                </div>

                <div class="filter-group">
                    <label for="editSupplierEmail">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                    <input type="email" id="editSupplierEmail" class="input-field" placeholder="order@example.com">
                </div>

                <div class="filter-group">
                    <label for="editSupplierAddress">ä½æ‰€</label>
                    <textarea id="editSupplierAddress" class="input-field" rows="3" placeholder="ä½æ‰€ï¼ˆä»»æ„ï¼‰"></textarea>
                </div>

                <div class="filter-group">
                    <label for="editSupplierNote">å‚™è€ƒ</label>
                    <textarea id="editSupplierNote" class="input-field" rows="3" placeholder="å‚™è€ƒï¼ˆä»»æ„ï¼‰"></textarea>
                </div>

                <div style="display: flex; gap: 12px;">
                    <button id="supplierUpdateBtn" class="btn btn-primary primary-action" type="button">
                        ğŸ’¾ æ›´æ–°ã™ã‚‹
                    </button>
                    <button id="supplierCancelEditBtn" class="btn btn-outline" type="button">
                        âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- å¾“æ¥­å“¡ç®¡ç†ãƒšãƒ¼ã‚¸ -->
    <div id="employeesPage" class="page-content">
        <div class="page-header">
            <h2>ğŸ‘¥ å¾“æ¥­å“¡ç®¡ç†</h2>
            <p>å¾“æ¥­å“¡æƒ…å ±ã‚’ç®¡ç†ã—ã¾ã™</p>
        </div>

        <!-- ã‚µãƒ–ã‚¿ãƒ– -->
        <div class="subtab-group" id="employeesSubtabs">
            <button class="subtab-btn active" data-detail-tab="list">ğŸ‘¤ å¾“æ¥­å“¡ä¸€è¦§</button>
            <button class="subtab-btn" data-detail-tab="add">â­ æ–°è¦ç™»éŒ²</button>
        </div>

        <!-- å¾“æ¥­å“¡ä¸€è¦§ -->
        <div id="employeesListSection" class="detail-tab-content" data-detail-tab-content="list">
            <div class="table-container">
                <table class="employees-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>å¾“æ¥­å“¡ã‚³ãƒ¼ãƒ‰</th>
                            <th>æ°å</th>
                            <th>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</th>
                            <th>éƒ¨ç½²</th>
                            <th>çŠ¶æ…‹</th>
                            <th>æ¨©é™</th>
                            <th>ä½œæˆæ—¥æ™‚</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="employeesTableBody">
                        <tr>
                            <td colspan="9" class="loading">èª­ã¿è¾¼ã¿ä¸­...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- æ–°è¦è¿½åŠ  -->
        <div id="employeesAddSection" class="detail-tab-content" data-detail-tab-content="add" hidden>
            <div class="form-container">
                <h3 class="section-title">æ–°è¦å¾“æ¥­å“¡ã®ç™»éŒ²</h3>

                <div class="filter-group">
                    <label for="employeeCode">å¾“æ¥­å“¡ã‚³ãƒ¼ãƒ‰ *</label>
                    <input type="text" id="employeeCode" class="input-field" placeholder="ä¾‹: EMP001" required>
                </div>

                <div class="filter-group">
                    <label for="employeeName">æ°å *</label>
                    <input type="text" id="employeeName" class="input-field" placeholder="ä¾‹: å±±ç”°å¤ªéƒ" required>
                </div>

                <div class="filter-group">
                    <label for="employeeDepartment">éƒ¨ç½²</label>
                    <input type="text" id="employeeDepartment" class="input-field" placeholder="ä¾‹: ç·å‹™éƒ¨">
                </div>

                <div class="filter-group">
                    <label for="employeeEmail">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                    <input type="email" id="employeeEmail" class="input-field" placeholder="example@company.com">
                </div>

                <div class="filter-group">
                    <label for="employeePassword">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                    <input type="password" id="employeePassword" class="input-field" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆä»»æ„ï¼‰">
                </div>

                <div class="filter-group">
                    <label for="employeeRole">å½¹è·</label>
                    <select id="employeeRole" class="input-field">
                        <option value="ä¸€èˆ¬">ä¸€èˆ¬</option>
                        <option value="ç®¡ç†è€…">ç®¡ç†è€…</option>
                        <option value="ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼">ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</option>
                    </select>
                </div>

                <button id="employeeSubmitBtn" class="btn btn-primary primary-action" type="button">
                    ğŸ’¾ å¾“æ¥­å“¡ã‚’ç™»éŒ²ã™ã‚‹
                </button>

                <div class="import-section">
                    <h3>CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h3>
                    <p class="import-note">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«æ²¿ã£ã¦å…¥åŠ›ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã¾ã™ã€‚</p>
                    <input type="file" id="employeeCsvFileInput" class="input-field file-input" accept=".csv">
                    <div class="import-actions">
                        <button id="employeeCsvImportBtn" class="btn btn-outline" type="button">CSVã‚’èª­ã¿è¾¼ã‚€</button>
                        <button id="employeeCsvTemplateDownloadBtn" class="btn btn-outline" type="button">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                    </div>
                    <small class="import-hint">å¿…é ˆåˆ—: ã‚³ãƒ¼ãƒ‰ / æ°åã€‚UTF-8 ã§ä¿å­˜ã—ã¦ãã ã•ã„ã€‚</small>
                </div>
            </div>
        </div>

        <!-- ç·¨é›† -->
        <div id="employeesEditSection" class="detail-tab-content" data-detail-tab-content="edit" hidden>
            <div class="form-container">
                <h3 class="section-title">å¾“æ¥­å“¡æƒ…å ±ã®ç·¨é›†</h3>

                <input type="hidden" id="editEmployeeId">

                <div class="filter-group">
                    <label for="editEmployeeCode">å¾“æ¥­å“¡ã‚³ãƒ¼ãƒ‰ *</label>
                    <input type="text" id="editEmployeeCode" class="input-field" readonly style="background-color: #f5f5f5;">
                    <small class="import-hint">ã‚³ãƒ¼ãƒ‰ã¯å¤‰æ›´ã§ãã¾ã›ã‚“</small>
                </div>

                <div class="filter-group">
                    <label for="editEmployeeName">æ°å *</label>
                    <input type="text" id="editEmployeeName" class="input-field" placeholder="ä¾‹: å±±ç”°å¤ªéƒ" required>
                </div>

                <div class="filter-group">
                    <label for="editEmployeeDepartment">éƒ¨ç½²</label>
                    <input type="text" id="editEmployeeDepartment" class="input-field" placeholder="ä¾‹: ç·å‹™éƒ¨">
                </div>

                <div class="filter-group">
                    <label for="editEmployeeEmail">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                    <input type="email" id="editEmployeeEmail" class="input-field" placeholder="example@company.com">
                </div>

                <div class="filter-group">
                    <label for="editEmployeePassword">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                    <input type="password" id="editEmployeePassword" class="input-field" placeholder="å¤‰æ›´ã™ã‚‹å ´åˆã®ã¿å…¥åŠ›">
                    <small class="import-hint">ç©ºæ¬„ã®å ´åˆã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¾ã›ã‚“</small>
                </div>

                <div class="filter-group">
                    <label for="editEmployeeRole">å½¹è·</label>
                    <select id="editEmployeeRole" class="input-field">
                        <option value="ä¸€èˆ¬">ä¸€èˆ¬</option>
                        <option value="ç®¡ç†è€…">ç®¡ç†è€…</option>
                        <option value="ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼">ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</option>
                    </select>
                </div>

                <div style="display: flex; gap: 12px;">
                    <button id="employeeUpdateBtn" class="btn btn-primary primary-action" type="button">
                        ğŸ’¾ æ›´æ–°ã™ã‚‹
                    </button>
                    <button id="employeeCancelEditBtn" class="btn btn-outline" type="button">
                        âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- å…¥å‡ºåº«å±¥æ­´ãƒšãƒ¼ã‚¸ -->
    <div id="historyPage" class="page-content">
        <div class="page-header">
            <h2>ğŸ“‹ å…¥å‡ºåº«å±¥æ­´</h2>
            <p>å‡ºåº«ãƒ»å…¥åº«ã®å±¥æ­´ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>
        </div>

        <div class="filter-container">
            <h3>æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</h3>

            <div class="filter-row">
                <div class="filter-group">
                    <label for="historyType">å±¥æ­´ç¨®åˆ¥</label>
                    <select id="historyType" class="input-field">
                        <option value="all">ã™ã¹ã¦</option>
                        <option value="outbound">å‡ºåº«ã®ã¿</option>
                        <option value="inbound">å…¥åº«ã®ã¿</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="historyDepartment">éƒ¨ç½²</label>
                    <select id="historyDepartment" class="input-field">
                        <option value="">ã™ã¹ã¦</option>
                    </select>
                </div>
            </div>

            <div class="filter-row">
                <div class="filter-group">
                    <label for="historyStartDate">é–‹å§‹æ—¥</label>
                    <input type="date" id="historyStartDate" class="input-field">
                </div>
                <div class="filter-group">
                    <label for="historyEndDate">çµ‚äº†æ—¥</label>
                    <input type="date" id="historyEndDate" class="input-field">
                </div>
            </div>

            <div class="filter-group">
                <label for="historySearch">å“åãƒ»æ‹…å½“è€…ã§æ¤œç´¢</label>
                <input type="text" id="historySearch" class="input-field" placeholder="å“åã¾ãŸã¯æ‹…å½“è€…åã‚’å…¥åŠ›">
            </div>

            <button id="searchHistory" class="btn btn-primary">ğŸ” æ¤œç´¢</button>
        </div>

        <div class="count-info">
            <p id="historyCount">è¡¨ç¤ºä»¶æ•°: 0</p>
        </div>

        <div class="table-container">
            <table class="history-table">
                <thead>
                    <tr>
                        <th>ç¨®åˆ¥</th>
                        <th>æ—¥æ™‚</th>
                        <th>ã‚³ãƒ¼ãƒ‰</th>
                        <th>å“å</th>
                        <th>æ•°é‡</th>
                        <th>æ‹…å½“è€…</th>
                        <th>éƒ¨ç½²</th>
                        <th>å˜ä¾¡</th>
                        <th>åˆè¨ˆé‡‘é¡</th>
                        <th>å‚™è€ƒ</th>
                    </tr>
                </thead>
                <tbody id="historyTableBody">
                    <tr>
                        <td colspan="10" class="loading">èª­ã¿è¾¼ã¿ä¸­...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- ã‚«ãƒ¡ãƒ©ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="cameraModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>QRã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³</h2>
                <button id="closeModal" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <video id="cameraVideo" autoplay playsinline></video>
                <canvas id="cameraCanvas" style="display: none;"></canvas>
            </div>
            <div class="modal-footer">
                <button id="captureBtn" class="btn btn-primary">
                     æ’®å½±
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/modules/common.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modules/employees.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modules/users.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modules/inventory.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modules/register.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modules/operations.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modules/orders.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modules/history.js') }}"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
